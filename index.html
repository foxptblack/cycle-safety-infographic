<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- Chosen Palette: Professional & Vibrant -->
    <!-- Application Structure Plan: このSPAは、読者の安全意識を変革するための4部構成の物語として設計されています。1.「なぜ」プロの思考法が必要か(ヒヤリ・ハットの法則)。2.「何を」計画すべきか(獲得標高)。3.「どうやって」準備するか(5分間点検)。4.「どこで」注意すべきか(都市の危険)。この論理的な流れにより、ユーザーは抽象的な概念から具体的な行動へとスムーズに導かれ、書籍の価値を直感的に理解できます。 -->
    <!-- Visualization & Content Choices: 1. ヒヤリ・ハット: Goal=比較/構成, Viz=HTML Canvas 三角形イラスト, Justification=1:29:300の階層構造を最も象徴的かつ直感的に表現するため。 2. 獲得標高: Goal=変化/比較, Viz=エリアチャート(Chart.js), Justification=疲労度の変化を視覚的に示すため。 3. 安全点検: Goal=整理, Viz=構造化HTML/CSS(Tailwind), Justification=SVG/Mermaid禁止の制約下で、プロセスを最も明確に示すため。 4. 都市の危険: Goal=比較/構成, Viz=ドーナツチャート(Chart.js), Justification=危険要因の構成比率を一目で理解させるため。 -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>『事故率ゼロのサイクルプランニング術』インフォグラフィック</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #F8F9FA;
            color: #073B4C;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-[#073B4C] mb-3">事故率ゼロのサイクルプランニング術</h1>
            <p class="text-lg text-[#118AB2]">バス運行管理者が教える、週末100kmを「絶対の安心感」で走りきるためのデータサイエンス</p>
        </header>

        <main class="space-y-12 md:space-y-16">
            <section id="hiyari-hatto">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 transition-all duration-300 hover:shadow-2xl">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#073B4C] mb-4 text-center">1. プロの思考法：事故は「運」ではなく「確率」である</h2>
                    <p class="text-base md:text-lg mb-8 text-gray-700 leading-relaxed">多くのサイクリストは危険な出来事を「運が悪かった」で片付けますが、プロはそれを「重大事故の予告サイン」と捉えます。「ヒヤリ・ハットの法則」は、1件の重大事故の背後には、300件もの軽微な危険が隠れていることを示しています。この300件のサインに気づき、対策を打つことが事故をゼロにする唯一の道です。</p>
                    <div class="chart-container h-[300px] md:h-[350px] max-w-sm">
                        <canvas id="pyramidCanvas"></canvas>
                    </div>
                    <p class="text-center mt-6 text-sm text-gray-500">ヒヤリ・ハットの法則：危険の階層構造</p>
                </div>
            </section>

            <section id="planning">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 transition-all duration-300 hover:shadow-2xl">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#073B4C] mb-4 text-center">2. 計画の魔術：距離ではなく「獲得標高」を支配する</h2>
                    <p class="text-base md:text-lg mb-6 text-gray-700 leading-relaxed">「100km走る」という目標も、平坦な道と山道では全く意味が異なります。体力を奪う真の敵は距離ではなく、どれだけ坂を上ったかを示す「獲得標高」です。下のグラフは同じ100kmでも、体力の消耗度が全く異なることを示しています。プロの計画とは、この「見えない敵」を事前に把握し、ペース配分や休憩を最適化することです。</p>
                    <div class="chart-container">
                        <canvas id="elevationChart"></canvas>
                    </div>
                    <p class="text-center mt-4 text-sm text-gray-500">走行距離と獲得標高が体力消耗に与える影響</p>
                </div>
            </section>

            <section id="safety-check">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 transition-all duration-300 hover:shadow-2xl">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#073B4C] mb-6 text-center">3. 元整備士の儀式：出発前の「5分間安全点検」</h2>
                    <p class="text-base md:text-lg mb-8 text-gray-700 leading-relaxed">あなたの命を乗せる愛車は、最高の相棒であると同時に、常に点検が必要な「車両」です。プロの整備士が毎日行うように、あなたも出発前にわずか5分の点検を習慣にしましょう。この簡単な儀式が、ライド中の致命的なトラブルを未然に防ぎます。</p>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 text-center">
                        <div class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg min-h-[100px]">
                            <span class="text-3xl font-bold text-[#118AB2]">1</span>
                            <p class="font-bold mt-2">タイヤ</p>
                            <p class="text-sm text-gray-600">空気圧と外観</p>
                        </div>
                        <div class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg min-h-[100px]">
                            <span class="text-3xl font-bold text-[#118AB2]">2</span>
                            <p class="font-bold mt-2">ブレーキ</p>
                            <p class="text-sm text-gray-600">効きとレバー</p>
                        </div>
                        <div class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg min-h-[100px]">
                            <span class="text-3xl font-bold text-[#118AB2]">3</span>
                            <p class="font-bold mt-2">駆動系</p>
                            <p class="text-sm text-gray-600">チェーンとギア</p>
                        </div>
                        <div class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg min-h-[100px]">
                            <span class="text-3xl font-bold text-[#118AB2]">4</span>
                            <p class="font-bold mt-2">固定部</p>
                            <p class="text-sm text-gray-600">車輪とサドル</p>
                        </div>
                        <div class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg col-span-2 md:col-span-1 min-h-[100px]">
                            <span class="text-3xl font-bold text-[#118AB2]">5</span>
                            <p class="font-bold mt-2">ボルト</p>
                            <p class="text-sm text-gray-600">主要部の緩み</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="hazards">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 transition-all duration-300 hover:shadow-2xl">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#073B4C] mb-4 text-center">4. 危険予知：都市の公道に潜む「5大リスク」</h2>
                    <p class="text-base md:text-lg mb-6 text-gray-700 leading-relaxed">毎日の自転車通勤で得たデータから、都市部におけるサイクリストの危険は特定のパターンに集約されることが分かります。特に「左折巻き込み」と「他の自転車の予測不能な動き」は、ヒヤリ・ハットの大部分を占めます。これらのリスクの存在を事前に知っておくだけで、あなたの危険回避能力は格段に向上します。</p>
                    <div class="chart-container h-[380px] md:h-[420px]">
                        <canvas id="hazardsChart"></canvas>
                    </div>
                    <p class="text-center mt-4 text-sm text-gray-500">都市部におけるヒヤリ・ハットの主な原因</p>
                </div>
            </section>

            <section id="author" class="text-center">
                 <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#073B4C] mb-4">監修者について</h2>
                    <p class="text-base md:text-lg text-gray-700 leading-relaxed max-w-3xl mx-auto">このインフォグラフィックは、30年近くにわたり大手バス会社で安全運行を支えてきた専門家の知見に基づいています。運行管理者、整備士としての国家資格、そして毎日の自転車通勤で得た実践的知識を組み合わせ、全てのサイクリストに「絶対的な安心感」を提供することを目指しています。</p>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 md:mt-16 text-sm text-gray-500">
            <p>&copy; 2025 『事故率ゼロのサイクルプランニング術』 All Rights Reserved.</p>
        </footer>

    </div>

    <script>
        const FONT_COLOR = '#073B4C';
        const GRID_COLOR = '#E5E7EB';
        const PALETTE = {
            red: '#FF6B6B',
            yellow: '#FFD166',
            green: '#06D6A0',
            blue: '#118AB2',
            navy: '#073B4C'
        };

        Chart.defaults.color = FONT_COLOR;
        Chart.defaults.font.family = "'Noto Sans JP', sans-serif";
        Chart.defaults.font.size = 14;

        function wrapLabel(label) {
            const maxWidth = 16;
            if (typeof label !== 'string' || label.length <= maxWidth) {
                return label;
            }
            const words = label.split('');
            const lines = [];
            let currentLine = '';
            words.forEach(word => {
                if (currentLine.length + word.length > maxWidth) {
                    lines.push(currentLine);
                    currentLine = '';
                }
                currentLine += word;
            });
            lines.push(currentLine);
            return lines;
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join('');
            }
            return label;
        };
        
        const commonChartOptions = {
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 20,
                        font: {
                            size: 14
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    backgroundColor: 'rgba(7, 59, 76, 0.9)',
                    titleColor: '#FFFFFF',
                    bodyColor: '#FFFFFF',
                    titleFont: { size: 16 },
                    bodyFont: { size: 14 },
                    padding: 12,
                    cornerRadius: 6
                }
            }
        };

        function drawPyramid() {
            const canvas = document.getElementById('pyramidCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const container = canvas.parentElement;

            const dpr = window.devicePixelRatio || 1;
            const rect = container.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            
            const width = rect.width;
            const height = rect.height;

            const topY = height * 0.05;
            const bottomY = height * 0.95;
            const triangleHeight = bottomY - topY;

            const levelProportions = [0.2, 0.35, 0.45];
            const y1 = topY;
            const y2 = topY + triangleHeight * levelProportions[0];
            const y3 = topY + triangleHeight * (levelProportions[0] + levelProportions[1]);

            const getWidthAtY = (y) => {
                return ((y - topY) / triangleHeight) * width;
            };

            ctx.clearRect(0, 0, width, height);

            ctx.fillStyle = PALETTE.green;
            ctx.beginPath();
            ctx.moveTo(width / 2 - getWidthAtY(bottomY) / 2, bottomY);
            ctx.lineTo(width / 2 + getWidthAtY(bottomY) / 2, bottomY);
            ctx.lineTo(width / 2 + getWidthAtY(y3) / 2, y3);
            ctx.lineTo(width / 2 - getWidthAtY(y3) / 2, y3);
            ctx.closePath();
            ctx.fill();

            ctx.fillStyle = PALETTE.yellow;
            ctx.beginPath();
            ctx.moveTo(width / 2 - getWidthAtY(y3) / 2, y3);
            ctx.lineTo(width / 2 + getWidthAtY(y3) / 2, y3);
            ctx.lineTo(width / 2 + getWidthAtY(y2) / 2, y2);
            ctx.lineTo(width / 2 - getWidthAtY(y2) / 2, y2);
            ctx.closePath();
            ctx.fill();

            ctx.fillStyle = PALETTE.red;
            ctx.beginPath();
            ctx.moveTo(width / 2 - getWidthAtY(y2) / 2, y2);
            ctx.lineTo(width / 2 + getWidthAtY(y2) / 2, y2);
            ctx.lineTo(width / 2, topY);
            ctx.closePath();
            ctx.fill();
            
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px "Noto Sans JP"';
            ctx.fillText('1', width / 2, y1 + (y2 - y1) / 2 - 10);
            ctx.font = '14px "Noto Sans JP"';
            ctx.fillText('重大事故', width / 2, y1 + (y2 - y1) / 2 + 12);

            ctx.fillStyle = PALETTE.navy;
            ctx.font = 'bold 22px "Noto Sans JP"';
            ctx.fillText('29', width / 2, y2 + (y3 - y2) / 2 - 12);
            ctx.font = '16px "Noto Sans JP"';
            ctx.fillText('軽微な事故', width / 2, y2 + (y3 - y2) / 2 + 14);

            ctx.fillStyle = 'white';
            ctx.font = 'bold 26px "Noto Sans JP"';
            ctx.fillText('300', width / 2, y3 + (bottomY - y3) / 2 - 14);
            ctx.font = '18px "Noto Sans JP"';
            ctx.fillText('ヒヤリ・ハット', width / 2, y3 + (bottomY - y3) / 2 + 16);
        }

        document.addEventListener('DOMContentLoaded', () => {
            drawPyramid();
            
            new Chart(document.getElementById('elevationChart'), {
                type: 'line',
                data: {
                    labels: ['0km', '20km', '40km', '60km', '80km', '100km'],
                    datasets: [{
                        label: '平坦コース (獲得標高150m)',
                        data: [10, 20, 30, 40, 50, 60],
                        borderColor: PALETTE.blue,
                        backgroundColor: PALETTE.blue + '33',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: '山岳コース (獲得標高1200m)',
                        data: [10, 35, 50, 80, 95, 100],
                        borderColor: PALETTE.red,
                        backgroundColor: PALETTE.red + '33',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    ...commonChartOptions,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: '体感的な疲労度 (%)',
                                font: { size: 14 }
                            },
                            grid: { color: GRID_COLOR }
                        },
                        x: {
                            grid: { color: GRID_COLOR, drawOnChartArea: false }
                        }
                    }
                }
            });

            const hazardLabels = [
                '左折巻き込み',
                wrapLabel('他の自転車の予測不能な動き'),
                wrapLabel('停車車両のドア開放'),
                '歩行者の飛び出し',
                'その他'
            ];
            new Chart(document.getElementById('hazardsChart'), {
                type: 'doughnut',
                data: {
                    labels: hazardLabels,
                    datasets: [{
                        label: '原因の割合',
                        data: [40, 25, 15, 10, 10],
                        backgroundColor: [PALETTE.red, PALETTE.yellow, PALETTE.green, PALETTE.blue, PALETTE.navy],
                        hoverOffset: 8,
                        borderColor: '#FFFFFF',
                        borderWidth: 2
                    }]
                },
                options: {
                    ...commonChartOptions,
                    cutout: '50%'
                }
            });
        });

        window.addEventListener('resize', () => {
            drawPyramid();
        });

    </script>

</body>
</html>
